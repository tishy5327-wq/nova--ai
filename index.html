<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Nova AI V3.0 - Complete Voice & AI Assistant</title>
    <meta name="description" content="Complete AI assistant with voice recognition, translation, study tools, mood detection, code help, storytelling, and more - all in your browser!">
    
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Manrope:wght@400;500;600;700;800&family=JetBrains+Mono:wght@400;500&display=swap" rel="stylesheet">
    
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        :root {
            --primary-900: #0A1628;
            --primary-800: #132744;
            --primary-700: #1E3A5F;
            --primary-600: #2952A3;
            --primary-500: #3B82F6;
            --accent-500: #FF6B6B;
            --accent-400: #FF8787;
            --accent-300: #FFA3A3;
            --neutral-50: #F8FAFC;
            --neutral-100: #F1F5F9;
            --neutral-200: #E2E8F0;
            --neutral-700: #334155;
            --neutral-900: #0F172A;
            --success: #10B981;
            --warning: #F59E0B;
            --error: #EF4444;
            --font-display: 'Manrope', sans-serif;
            --font-mono: 'JetBrains Mono', monospace;
        }

        body {
            font-family: var(--font-display);
            background: linear-gradient(180deg, var(--primary-900) 0%, var(--primary-700) 100%);
            color: var(--neutral-50);
            min-height: 100vh;
            line-height: 1.6;
        }

        header {
            padding: 1rem 1.5rem;
            display: flex;
            justify-content: space-between;
            align-items: center;
            background: rgba(255, 255, 255, 0.05);
            backdrop-filter: blur(10px);
            position: sticky;
            top: 0;
            z-index: 100;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        }

        .logo {
            display: flex;
            align-items: center;
            gap: 1rem;
        }

        .logo-icon {
            width: 40px;
            height: 40px;
            background: linear-gradient(135deg, var(--accent-500) 0%, var(--accent-300) 100%);
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 800;
            font-size: 1.5rem;
        }

        .logo-text {
            font-size: 1.5rem;
            font-weight: 800;
            letter-spacing: -0.02em;
        }

        .version {
            font-size: 0.75rem;
            color: var(--neutral-200);
            background: rgba(255, 255, 255, 0.1);
            padding: 0.25rem 0.5rem;
            border-radius: 4px;
            margin-left: 0.5rem;
        }

        nav {
            display: flex;
            gap: 1.5rem;
        }

        .nav-btn {
            background: rgba(255, 255, 255, 0.1);
            border: none;
            color: white;
            padding: 0.5rem 1rem;
            border-radius: 8px;
            cursor: pointer;
            font-family: var(--font-display);
            font-weight: 600;
            transition: all 0.3s ease;
        }

        .nav-btn:hover {
            background: rgba(255, 255, 255, 0.2);
            transform: translateY(-2px);
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 2rem 1.5rem;
        }

        .hero {
            text-align: center;
            margin-bottom: 3rem;
        }

        .hero h1 {
            font-size: clamp(2rem, 5vw, 3.5rem);
            font-weight: 800;
            line-height: 1.1;
            margin-bottom: 1rem;
            background: linear-gradient(135deg, #FFFFFF 0%, var(--accent-300) 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .hero p {
            font-size: 1.1rem;
            color: var(--neutral-200);
            max-width: 700px;
            margin: 0 auto 2rem;
        }

        .main-grid {
            display: grid;
            grid-template-columns: 1fr 2fr;
            gap: 2rem;
            margin-bottom: 2rem;
        }

        .voice-panel, .chat-panel, .features-panel {
            background: rgba(255, 255, 255, 0.05);
            backdrop-filter: blur(20px);
            border-radius: 16px;
            border: 1px solid rgba(255, 255, 255, 0.1);
            padding: 2rem;
        }

        .voice-button-container {
            text-align: center;
            margin-bottom: 2rem;
        }

        .voice-button {
            width: 120px;
            height: 120px;
            border-radius: 50%;
            border: none;
            background: linear-gradient(135deg, var(--accent-500) 0%, var(--accent-400) 100%);
            color: white;
            font-size: 3rem;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 0 0 0 rgba(255, 107, 107, 0.4);
        }

        .voice-button:hover {
            transform: scale(1.05);
            box-shadow: 0 0 0 12px rgba(255, 107, 107, 0.2);
        }

        .voice-button.listening {
            animation: pulse 1.5s ease-in-out infinite;
        }

        @keyframes pulse {
            0%, 100% { box-shadow: 0 0 0 0 rgba(255, 107, 107, 0.7); }
            50% { box-shadow: 0 0 0 20px rgba(255, 107, 107, 0); }
        }

        .status-indicator {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 0.5rem;
            padding: 0.75rem 1.5rem;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 100px;
            margin: 1rem auto;
            max-width: fit-content;
            font-weight: 600;
        }

        .status-dot {
            width: 8px;
            height: 8px;
            border-radius: 50%;
            background: var(--neutral-200);
            animation: blink 2s ease-in-out infinite;
        }

        @keyframes blink {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.3; }
        }

        .status-indicator.listening .status-dot {
            background: var(--success);
        }

        .chat-input-container {
            display: flex;
            gap: 0.5rem;
            margin-bottom: 1rem;
        }

        .chat-input {
            flex: 1;
            padding: 1rem;
            background: rgba(255, 255, 255, 0.1);
            border: 1px solid rgba(255, 255, 255, 0.2);
            border-radius: 12px;
            color: white;
            font-family: var(--font-display);
            font-size: 1rem;
        }

        .chat-input::placeholder {
            color: var(--neutral-200);
        }

        .send-btn {
            padding: 1rem 1.5rem;
            background: linear-gradient(135deg, var(--accent-500) 0%, var(--accent-400) 100%);
            border: none;
            border-radius: 12px;
            color: white;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .send-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(255, 107, 107, 0.3);
        }

        .chat-messages {
            height: 400px;
            overflow-y: auto;
            margin-bottom: 1rem;
            padding: 1rem;
            background: rgba(0, 0, 0, 0.2);
            border-radius: 12px;
        }

        .message {
            margin-bottom: 1rem;
            padding: 1rem;
            border-radius: 12px;
            animation: fadeIn 0.3s ease;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .message.user {
            background: rgba(59, 130, 246, 0.2);
            border-left: 3px solid var(--primary-500);
            margin-left: 20%;
        }

        .message.assistant {
            background: rgba(255, 107, 107, 0.2);
            border-left: 3px solid var(--accent-500);
            margin-right: 20%;
        }

        .message strong {
            display: block;
            margin-bottom: 0.5rem;
            font-size: 0.9rem;
            opacity: 0.8;
        }

        .features-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 1rem;
        }

        .feature-card {
            padding: 1.5rem;
            background: rgba(255, 255, 255, 0.05);
            border-radius: 12px;
            border: 1px solid rgba(255, 255, 255, 0.1);
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .feature-card:hover {
            background: rgba(255, 255, 255, 0.1);
            transform: translateY(-4px);
            border-color: var(--accent-500);
        }

        .feature-icon {
            font-size: 2rem;
            margin-bottom: 0.5rem;
        }

        .feature-title {
            font-weight: 700;
            margin-bottom: 0.5rem;
        }

        .feature-desc {
            font-size: 0.9rem;
            color: var(--neutral-200);
        }

        .quick-actions {
            display: flex;
            gap: 0.5rem;
            flex-wrap: wrap;
            margin-bottom: 1rem;
        }

        .quick-btn {
            padding: 0.5rem 1rem;
            background: rgba(255, 255, 255, 0.1);
            border: 1px solid rgba(255, 255, 255, 0.2);
            border-radius: 8px;
            color: white;
            font-size: 0.9rem;
            cursor: pointer;
            transition: all 0.2s ease;
        }

        .quick-btn:hover {
            background: rgba(255, 255, 255, 0.2);
        }

        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(10, 22, 40, 0.95);
            backdrop-filter: blur(10px);
            z-index: 1000;
            align-items: center;
            justify-content: center;
            padding: 2rem;
        }

        .modal.show {
            display: flex;
        }

        .modal-content {
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(20px);
            border-radius: 16px;
            padding: 2rem;
            max-width: 800px;
            width: 100%;
            max-height: 80vh;
            overflow-y: auto;
            border: 1px solid rgba(255, 255, 255, 0.2);
        }

        .modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 1.5rem;
        }

        .modal-title {
            font-size: 1.5rem;
            font-weight: 700;
        }

        .close-btn {
            background: none;
            border: none;
            color: white;
            font-size: 1.5rem;
            cursor: pointer;
            padding: 0.5rem;
            border-radius: 8px;
            transition: background 0.2s ease;
        }

        .close-btn:hover {
            background: rgba(255, 255, 255, 0.1);
        }

        .code-block {
            background: rgba(0, 0, 0, 0.3);
            padding: 1rem;
            border-radius: 8px;
            font-family: var(--font-mono);
            font-size: 0.9rem;
            overflow-x: auto;
            margin: 1rem 0;
        }

        .section-title {
            font-size: 1.25rem;
            font-weight: 700;
            margin: 1.5rem 0 1rem;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        @media (max-width: 1024px) {
            .main-grid {
                grid-template-columns: 1fr;
            }
        }

        @media (max-width: 768px) {
            nav {
                display: none;
            }
            
            .voice-button {
                width: 100px;
                height: 100px;
                font-size: 2.5rem;
            }
        }
    </style>
</head>
<body>
    <header>
        <div class="logo">
            <div class="logo-icon">N</div>
            <div>
                <span class="logo-text">NOVA AI</span>
                <span class="version">V3.0</span>
            </div>
        </div>
        <nav>
            <button class="nav-btn" onclick="showHelp()">üìö Help</button>
            <button class="nav-btn" onclick="showFeatures()">‚ú® Features</button>
        </nav>
    </header>

    <div class="container">
        <div class="hero">
            <h1>üöÄ Nova AI </h1>
            <p>Voice-powered AI assistant with translation, study tools, mood detection, code help, storytelling, and more - all in your browser!</p>
        </div>

        <div class="main-grid">
            <div class="voice-panel">
                <div class="voice-button-container">
                    <button class="voice-button" id="voiceButton" onclick="toggleVoice()">üé§</button>
                    <div class="status-indicator" id="statusIndicator">
                        <span class="status-dot"></span>
                        <span id="statusText">Tap to speak</span>
                    </div>
                </div>

                <div class="quick-actions">
                    <button class="quick-btn" onclick="quickCommand('translate hello to hindi')">üåê Translate</button>
                    <button class="quick-btn" onclick="quickCommand('tell me a story')">üìñ Story</button>
                    <button class="quick-btn" onclick="quickCommand('quiz me on python')">üìù Quiz</button>
                    <button class="quick-btn" onclick="quickCommand('code help loop')">üíª Code</button>
                    <button class="quick-btn" onclick="quickCommand('what time is it')">‚è∞ Time</button>
                    <button class="quick-btn" onclick="quickCommand('detect my mood')">üòä Mood</button>
                </div>
            </div>

            <div class="chat-panel">
                <h2 style="margin-bottom: 1rem;">üí¨ Chat</h2>
                <div class="chat-messages" id="chatMessages"></div>
                <div class="chat-input-container">
                    <input type="text" class="chat-input" id="chatInput" placeholder="Type a command or question..." onkeypress="handleKeyPress(event)">
                    <button class="send-btn" onclick="sendMessage()">Send</button>
                </div>
            </div>
        </div>

        <div class="features-panel">
            <h2 style="margin-bottom: 1rem;">üéØ Quick Access Features</h2>
            <div class="features-grid">
                <div class="feature-card" onclick="quickCommand('translate hello to spanish')">
                    <div class="feature-icon">üåê</div>
                    <div class="feature-title">Translation</div>
                    <div class="feature-desc">Translate to 20+ languages</div>
                </div>
                <div class="feature-card" onclick="showHelp()">
                    <div class="feature-icon">üìö</div>
                    <div class="feature-title">Study Assistant</div>
                    <div class="feature-desc">Explanations & quizzes</div>
                </div>
                <div class="feature-card" onclick="quickCommand('detect my mood from text')">
                    <div class="feature-icon">üòä</div>
                    <div class="feature-title">Mood Detection</div>
                    <div class="feature-desc">Analyze mood & music</div>
                </div>
                <div class="feature-card" onclick="quickCommand('code help function')">
                    <div class="feature-icon">üíª</div>
                    <div class="feature-title">Code Assistant</div>
                    <div class="feature-desc">Code help & debugging</div>
                </div>
                <div class="feature-card" onclick="quickCommand('tell me an adventure story')">
                    <div class="feature-icon">üìñ</div>
                    <div class="feature-title">AI Storyteller</div>
                    <div class="feature-desc">Creative story generation</div>
                </div>
                <div class="feature-card" onclick="quickCommand('study tips')">
                    <div class="feature-icon">üéØ</div>
                    <div class="feature-title">Study Tips</div>
                    <div class="feature-desc">Learning strategies</div>
                </div>
            </div>
        </div>
    </div>

    <!-- Help Modal -->
    <div class="modal" id="helpModal">
        <div class="modal-content">
            <div class="modal-header">
                <h2 class="modal-title">üìö Nova AI Commands</h2>
                <button class="close-btn" onclick="closeModal('helpModal')">‚úï</button>
            </div>
            <div id="helpContent"></div>
        </div>
    </div>

    <!-- Features Modal -->
    <div class="modal" id="featuresModal">
        <div class="modal-content">
            <div class="modal-header">
                <h2 class="modal-title">‚ú® All Features</h2>
                <button class="close-btn" onclick="closeModal('featuresModal')">‚úï</button>
            </div>
            <div id="featuresContent"></div>
        </div>
    </div>

    <script>
        // ==================== CORE NOVA AI ENGINE ====================
        
        class NovaAI {
            constructor() {
                this.recognition = null;
                this.isListening = false;
                this.initVoiceRecognition();
                this.initWelcome();
            }

            initVoiceRecognition() {
                if ('webkitSpeechRecognition' in window || 'SpeechRecognition' in window) {
                    const SpeechRecognition = window.SpeechRecognition || window.webkitSpeechRecognition;
                    this.recognition = new SpeechRecognition();
                    this.recognition.continuous = false;
                    this.recognition.interimResults = false;
                    this.recognition.lang = 'en-US';

                    this.recognition.onstart = () => this.onVoiceStart();
                    this.recognition.onresult = (event) => this.onVoiceResult(event);
                    this.recognition.onerror = (event) => this.onVoiceError(event);
                    this.recognition.onend = () => this.onVoiceEnd();
                }
            }

            initWelcome() {
                this.addMessage('assistant', 'üëã Welcome to Nova AI V3.0! I can help with:\n‚Ä¢ Translation (20+ languages)\n‚Ä¢ Study assistance & quizzes\n‚Ä¢ Mood detection & music\n‚Ä¢ Code help & debugging\n‚Ä¢ Story generation\n‚Ä¢ And much more!\n\nTry saying "help" or click any feature card to get started!');
            }

            onVoiceStart() {
                document.getElementById('voiceButton').classList.add('listening');
                document.getElementById('statusIndicator').classList.add('listening');
                document.getElementById('statusText').textContent = 'Listening...';
            }

            onVoiceResult(event) {
                const transcript = event.results[0][0].transcript;
                this.addMessage('user', transcript);
                this.processCommand(transcript);
            }

            onVoiceError(event) {
                console.error('Voice error:', event.error);
                this.addMessage('assistant', `‚ùå Voice error: ${event.error}. Please try again.`);
                this.resetVoiceState();
            }

            onVoiceEnd() {
                this.resetVoiceState();
            }

            resetVoiceState() {
                this.isListening = false;
                document.getElementById('voiceButton').classList.remove('listening');
                document.getElementById('statusIndicator').classList.remove('listening');
                document.getElementById('statusText').textContent = 'Tap to speak';
            }

            startVoice() {
                if (this.recognition && !this.isListening) {
                    this.isListening = true;
                    try {
                        this.recognition.start();
                    } catch (e) {
                        console.error('Failed to start recognition:', e);
                        this.resetVoiceState();
                    }
                }
            }

            stopVoice() {
                if (this.recognition && this.isListening) {
                    this.recognition.stop();
                }
            }

            addMessage(role, text) {
                const messagesDiv = document.getElementById('chatMessages');
                const message = document.createElement('div');
                message.className = `message ${role}`;
                message.innerHTML = `<strong>${role === 'user' ? 'üë§ You' : 'ü§ñ Nova'}</strong>${text.replace(/\n/g, '<br>')}`;
                messagesDiv.appendChild(message);
                messagesDiv.scrollTop = messagesDiv.scrollHeight;
            }

            speak(text) {
                if ('speechSynthesis' in window) {
                    const utterance = new SpeechSynthesisUtterance(text);
                    utterance.rate = 1.1;
                    utterance.pitch = 1.0;
                    window.speechSynthesis.speak(utterance);
                }
            }

            // ==================== TRANSLATION ====================
            
            translate(text, targetLang) {
                // Simple translation mapping (in production, use Google Translate API)
                const translations = {
                    'hi': { 'hello': '‡§®‡§Æ‡§∏‡•ç‡§§‡•á', 'thank you': '‡§ß‡§®‡•ç‡§Ø‡§µ‡§æ‡§¶', 'goodbye': '‡§Ö‡§≤‡§µ‡§ø‡§¶‡§æ' },
                    'es': { 'hello': 'hola', 'thank you': 'gracias', 'goodbye': 'adi√≥s' },
                    'fr': { 'hello': 'bonjour', 'thank you': 'merci', 'goodbye': 'au revoir' },
                    'de': { 'hello': 'hallo', 'thank you': 'danke', 'goodbye': 'auf wiedersehen' },
                    'ja': { 'hello': '„Åì„Çì„Å´„Å°„ÅØ', 'thank you': '„ÅÇ„Çä„Åå„Å®„ÅÜ', 'goodbye': '„Åï„Çà„ÅÜ„Å™„Çâ' }
                };

                const textLower = text.toLowerCase();
                const langTranslations = translations[targetLang] || {};
                
                return langTranslations[textLower] || `[${targetLang.toUpperCase()}] ${text}`;
            }

            // ==================== STUDY ASSISTANT ====================
            
            explainConcept(topic) {
                const explanations = {
                    'machine learning': `ü§ñ MACHINE LEARNING EXPLAINED

Machine Learning is like teaching a computer to learn from examples:

üìö How it works:
1. Show computer many examples (training data)
2. Computer finds patterns
3. Computer makes predictions on new data

üéØ Types:
‚Ä¢ Supervised: Learning with labels (like flashcards)
‚Ä¢ Unsupervised: Finding patterns without labels
‚Ä¢ Reinforcement: Learning by trial and error

üí° Real examples:
‚Ä¢ Netflix recommendations
‚Ä¢ Email spam filters
‚Ä¢ Voice assistants
‚Ä¢ Self-driving cars`,

                    'photosynthesis': `üå± PHOTOSYNTHESIS EXPLAINED

Plants making their own food using sunlight!

‚öóÔ∏è The Recipe:
‚òÄÔ∏è Sunlight + üíß Water + üå´Ô∏è CO‚ÇÇ ‚Üí üçÉ Glucose + üí® Oxygen

üìç Process:
1. Chlorophyll (green pigment) captures sunlight
2. Roots absorb water from soil
3. Leaves take CO‚ÇÇ from air
4. Chemical reaction creates glucose (food)
5. Releases oxygen as byproduct

üéØ Why important:
‚Ä¢ Foundation of food chain
‚Ä¢ Produces oxygen we breathe
‚Ä¢ Stores solar energy`,

                    'python': `üêç PYTHON PROGRAMMING

Python is a beginner-friendly programming language.

‚ú® Key Features:
‚Ä¢ Easy to read (looks like English)
‚Ä¢ Versatile (web, AI, data, games)
‚Ä¢ Huge community & libraries
‚Ä¢ Great for beginners

üìù Basic Syntax:
print("Hello World")  # Display text
x = 10  # Variables
if x > 5:  # Conditions
    print("Greater")

üéØ Popular uses:
‚Ä¢ Web development (Django, Flask)
‚Ä¢ Data science (Pandas, NumPy)
‚Ä¢ AI/ML (TensorFlow, PyTorch)
‚Ä¢ Automation scripts`
                };

                const topicLower = topic.toLowerCase();
                for (let key in explanations) {
                    if (topicLower.includes(key)) {
                        return explanations[key];
                    }
                }
                
                return `I don't have a detailed explanation for "${topic}" yet. Try:\n‚Ä¢ Machine Learning\n‚Ä¢ Photosynthesis\n‚Ä¢ Python`;
            }

            generateQuiz(subject) {
                const quizzes = {
                    'python': [
                        { q: 'What keyword creates a function?', opts: ['A) func', 'B) def', 'C) function', 'D) define'], ans: 'B', exp: 'def is used to define functions in Python' },
                        { q: 'What is the output of: len([1,2,3])?', opts: ['A) 1', 'B) 2', 'C) 3', 'D) Error'], ans: 'C', exp: 'len() returns the number of items' },
                        { q: 'Which is mutable?', opts: ['A) Tuple', 'B) String', 'C) List', 'D) Integer'], ans: 'C', exp: 'Lists can be changed after creation' }
                    ],
                    'science': [
                        { q: 'Speed of light?', opts: ['A) 3√ó10‚Å∏ m/s', 'B) 3√ó10‚Å∂ m/s', 'C) 3√ó10‚Å∑ m/s', 'D) 3√ó10‚Åπ m/s'], ans: 'A', exp: 'Speed of light in vacuum' },
                        { q: 'What is H‚ÇÇO?', opts: ['A) Hydrogen', 'B) Water', 'C) Oxygen', 'D) Acid'], ans: 'B', exp: 'Water molecule: 2 hydrogen + 1 oxygen' },
                        { q: 'Powerhouse of the cell?', opts: ['A) Nucleus', 'B) Mitochondria', 'C) Ribosome', 'D) Chloroplast'], ans: 'B', exp: 'Mitochondria produce energy (ATP)' }
                    ],
                    'math': [
                        { q: 'What is 15% of 200?', opts: ['A) 20', 'B) 30', 'C) 25', 'D) 35'], ans: 'B', exp: '15% of 200 = (15/100) √ó 200 = 30' },
                        { q: 'What is ‚àö144?', opts: ['A) 11', 'B) 12', 'C) 13', 'D) 14'], ans: 'B', exp: '12 √ó 12 = 144' },
                        { q: 'What is 2¬≥?', opts: ['A) 6', 'B) 8', 'C) 9', 'D) 16'], ans: 'B', exp: '2 √ó 2 √ó 2 = 8' }
                    ]
                };

                const questions = quizzes[subject] || quizzes['python'];
                let output = `\nüìù ${subject.toUpperCase()} QUIZ\n${'='.repeat(50)}\n\n`;
                
                questions.forEach((q, i) => {
                    output += `Question ${i + 1}: ${q.q}\n`;
                    q.opts.forEach(opt => output += `  ${opt}\n`);
                    output += `\nAnswer: ${q.ans} - ${q.exp}\n\n`;
                });

                return output;
            }

            getStudyTips() {
                const tips = [
                    'üß† Pomodoro Technique: Study 25 min, break 5 min',
                    'üìù Active Recall: Test yourself instead of re-reading',
                    'üîÑ Spaced Repetition: Review at increasing intervals',
                    'üéØ Teach Others: Best way to solidify understanding',
                    'üí§ Sleep Well: Memory consolidation happens during sleep',
                    'üèÉ Exercise: Boosts brain function and memory',
                    'üéµ Instrumental Music: Better than silence for some',
                    'üì± Remove Distractions: Phone away during study'
                ];

                return `\nüí° STUDY TIPS\n${'='.repeat(50)}\n\n` + tips.join('\n\n');
            }

            // ==================== MOOD DETECTION ====================
            
            detectMoodFromText(text) {
                const textLower = text.toLowerCase();
                
                const happyWords = ['happy', 'joy', 'great', 'awesome', 'love', 'excellent', 'wonderful', 'amazing'];
                const sadWords = ['sad', 'unhappy', 'depressed', 'down', 'miserable', 'awful', 'terrible'];
                const angryWords = ['angry', 'mad', 'furious', 'hate', 'annoyed', 'frustrated'];
                const stressedWords = ['stressed', 'anxious', 'worried', 'overwhelmed', 'nervous'];

                let mood = 'neutral';
                if (happyWords.some(w => textLower.includes(w))) mood = 'happy';
                else if (sadWords.some(w => textLower.includes(w))) mood = 'sad';
                else if (angryWords.some(w => textLower.includes(w))) mood = 'angry';
                else if (stressedWords.some(w => textLower.includes(w))) mood = 'stressed';

                return this.getMoodResponse(mood);
            }

            getMoodResponse(mood) {
                const emojiMap = {
                    'happy': 'üòä', 'sad': 'üò¢', 'angry': 'üò†',
                    'neutral': 'üòê', 'stressed': 'üò∞'
                };

                const musicRecs = {
                    'happy': ['Happy - Pharrell Williams', 'Tum Hi Ho - Aashiqui 2', 'Dil Chahta Hai'],
                    'sad': ['Tujhe Kitna Chahne Lage', 'Agar Tum Saath Ho', 'Channa Mereya'],
                    'angry': ['Eye of the Tiger', 'Sultan Theme', 'Apna Time Aayega'],
                    'stressed': ['Weightless - Marconi Union', 'Om Meditation', 'Rain Sounds'],
                    'neutral': ['Kabira', 'Kun Faya Kun', 'Shayad']
                };

                const tips = {
                    'happy': '‚Ä¢ Share your happiness!\n‚Ä¢ Help someone\n‚Ä¢ Spread positivity',
                    'sad': '‚Ä¢ Take a walk outside\n‚Ä¢ Call a friend\n‚Ä¢ This too shall pass',
                    'angry': '‚Ä¢ Take deep breaths\n‚Ä¢ Count to 10\n‚Ä¢ Write it down',
                    'stressed': '‚Ä¢ Meditate 5 minutes\n‚Ä¢ Deep breathing\n‚Ä¢ Take a break',
                    'neutral': '‚Ä¢ Set small goals\n‚Ä¢ Practice gratitude\n‚Ä¢ Stay active'
                };

                const songs = musicRecs[mood];
                const emoji = emojiMap[mood];

                return `\n${emoji} MOOD DETECTED: ${mood.toUpperCase()}\n${'='.repeat(50)}\n\nüéµ Recommended Songs:\n${songs.map(s => `‚Ä¢ ${s}`).join('\n')}\n\nüí° Mood Booster:\n${tips[mood]}`;
            }

            // ==================== CODE ASSISTANT ====================
            
            generateCode(type) {
                const templates = {
                    'function': `def calculate_sum(a, b):
    """Calculate sum of two numbers"""
    return a + b

# Usage
result = calculate_sum(5, 3)
print(result)  # Output: 8`,

                    'loop': `# For loop
for i in range(5):
    print(f"Iteration {i}")

# While loop
count = 0
while count < 5:
    print(count)
    count += 1

# Loop through list
items = ['apple', 'banana', 'orange']
for item in items:
    print(item)`,

                    'if': `# If-else statement
x = 10

if x > 0:
    print("Positive")
elif x < 0:
    print("Negative")
else:
    print("Zero")

# Ternary operator
result = "Even" if x % 2 == 0 else "Odd"`,

                    'list': `# Create and manipulate lists
my_list = [1, 2, 3, 4, 5]

# Append
my_list.append(6)

# Remove
my_list.remove(3)

# Sort
my_list.sort()

# List comprehension
squares = [x**2 for x in range(10)]`
                };

                const typeLower = type.toLowerCase();
                for (let key in templates) {
                    if (typeLower.includes(key)) {
                        return `\`\`\`python\n${templates[key]}\n\`\`\``;
                    }
                }

                return "Code pattern not found. Try: function, loop, if, list, dictionary";
            }

            explainError(errorType) {
                const errors = {
                    'indentation': `üî¥ IndentationError
‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ
‚ùå Problem: Incorrect indentation

‚úÖ Fix: Use 4 spaces consistently
Python requires proper indentation!

Example:
‚ùå Wrong:
def my_function():
print("Hello")

‚úÖ Correct:
def my_function():
    print("Hello")`,

                    'syntax': `üî¥ SyntaxError
‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ
‚ùå Problem: Invalid syntax

Common causes:
‚Ä¢ Missing colon (:)
‚Ä¢ Unclosed brackets/quotes
‚Ä¢ Invalid variable name

Example:
‚ùå if x > 5
‚úÖ if x > 5:`,

                    'name': `üî¥ NameError
‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ
‚ùå Problem: Variable not defined

‚úÖ Fix: Define before using

Example:
‚ùå print(x)  # x not defined
‚úÖ x = 10
   print(x)`,

                    'type': `üî¥ TypeError
‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ
‚ùå Problem: Wrong data type

Example:
‚ùå "5" + 5
‚úÖ int("5") + 5
or
‚úÖ "5" + str(5)`
                };

                return errors[errorType] || "Paste your full error message for help!";
            }

            // ==================== STORYTELLING ====================
            
            generateStory(theme) {
                const stories = {
                    'adventure': `üó∫Ô∏è THE LOST TREASURE
‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ

Chapter 1: The Discovery

Arjun was an ordinary student from Mumbai until he found a mysterious old map in his grandfather's attic. The map showed a legendary treasure hidden in the ancient ruins of Hampi.

"This is incredible!" Arjun whispered, studying the cryptic symbols.

The next morning, he packed his backpack and began the journey. After days of travel, he finally stood before the magnificent ruins.

Chapter 2: The Trials

Three trials awaited:
1. Mathematical puzzles (solved with school knowledge)
2. Physical challenges (tested courage)
3. Riddles of wisdom (required clever thinking)

Chapter 3: The Discovery

Deep inside, Arjun found not gold, but ancient books containing priceless wisdom. This knowledge would change the world.

üí° Moral: True treasure is knowledge, not riches.

THE END`,

                    'scifi': `üöÄ MISSION TO KEPLER-442b
‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ

Year 2156. Earth needed a new home. Commander Zara volunteered for the 50-year journey to planet Kepler-442b.

*50 years later*

"Wake up, Commander. We've arrived."

But something was wrong. The planet showed signs of intelligent life - impossible according to old data!

As the ship descended, crystalline cities appeared. Energy beings greeted Zara telepathically:

"We've been waiting. Earth sent probes, we sent back clean energy technology. Did you not receive it?"

Zara realized: The answer to Earth's problems was already being transmitted - as signals humans dismissed as cosmic noise!

Returning home with this knowledge, Zara bridged two civilizations.

üåü Moral: Sometimes answers are already in front of us.

THE END`,

                    'bedtime': `üåô THE STAR WHO WANTED TO DANCE
‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ

High in the night sky lived a little star named Tara. While other stars stood still and twinkled, Tara loved to dance.

"Stand still, Tara!" said the Moon.

But Tara couldn't help it. Her gentle movements brought joy to children below.

One night, a little girl named Mira who couldn't sleep saw Tara dancing. The graceful movements helped her relax and drift into beautiful dreams.

Soon, children everywhere discovered that watching Tara dance helped them sleep peacefully.

The Moon realized: "Tara, being different brings unique gifts."

‚ú® Sleep tight, and watch for dancing stars...

THE END`
                };

                return stories[theme] || stories['adventure'];
            }

            // ==================== COMMAND PROCESSING ====================
            
            processCommand(command) {
                const cmd = command.toLowerCase().trim();
                let response = '';

                // Greetings
                if (/^(hi|hello|hey|greetings)/.test(cmd)) {
                    response = 'üëã Hello! How can I help you today?';
                }
                // Help
                else if (cmd.includes('help')) {
                    showHelp();
                    return;
                }
                // Translation
                else if (cmd.includes('translate')) {
                    const match = cmd.match(/translate\s+(.+?)\s+to\s+(\w+)/);
                    if (match) {
                        const [, text, lang] = match;
                        const translated = this.translate(text, lang);
                        response = `üåê Translation to ${lang.toUpperCase()}:\n${translated}`;
                    } else {
                        response = 'Usage: "translate [text] to [language]"\nExample: "translate hello to hindi"';
                    }
                }
                // Explanations
                else if (cmd.includes('explain')) {
                    const topic = cmd.replace('explain', '').trim();
                    response = this.explainConcept(topic);
                }
                // Quiz
                else if (cmd.includes('quiz')) {
                    const subject = cmd.includes('python') ? 'python' : 
                                  cmd.includes('science') ? 'science' : 
                                  cmd.includes('math') ? 'math' : 'python';
                    response = this.generateQuiz(subject);
                }
                // Study tips
                else if (cmd.includes('study tip')) {
                    response = this.getStudyTips();
                }
                // Mood detection
                else if (cmd.includes('mood')) {
                    response = 'Tell me how you\'re feeling, and I\'ll detect your mood!';
                    setTimeout(() => {
                        const moodText = prompt('How are you feeling?');
                        if (moodText) {
                            const moodResponse = this.detectMoodFromText(moodText);
                            this.addMessage('assistant', moodResponse);
                            this.speak('I\'ve analyzed your mood and have some suggestions for you.');
                        }
                    }, 100);
                    return;
                }
                // Code help
                else if (cmd.includes('code') && (cmd.includes('help') || cmd.includes('generate'))) {
                    const type = cmd.includes('function') ? 'function' :
                               cmd.includes('loop') ? 'loop' :
                               cmd.includes('if') ? 'if' : 'function';
                    response = this.generateCode(type);
                }
                // Error explanation
                else if (cmd.includes('error') || cmd.includes('debug')) {
                    const errorType = cmd.includes('indentation') ? 'indentation' :
                                    cmd.includes('syntax') ? 'syntax' :
                                    cmd.includes('name') ? 'name' :
                                    cmd.includes('type') ? 'type' : 'syntax';
                    response = this.explainError(errorType);
                }
                // Stories
                else if (cmd.includes('story') || cmd.includes('tell me')) {
                    const theme = cmd.includes('adventure') ? 'adventure' :
                                cmd.includes('scifi') || cmd.includes('sci-fi') ? 'scifi' :
                                cmd.includes('bedtime') ? 'bedtime' : 'adventure';
                    response = this.generateStory(theme);
                }
                // Time
                else if (cmd.includes('time')) {
                    const now = new Date();
                    response = `üïê Current time: ${now.toLocaleTimeString()}`;
                }
                // Date
                else if (cmd.includes('date') || cmd.includes('today')) {
                    const now = new Date();
                    response = `üìÖ Today is ${now.toLocaleDateString('en-US', { weekday: 'long', year: 'numeric', month: 'long', day: 'numeric' })}`;
                }
                // Default
                else {
                    response = `I heard: "${command}"\n\nI can help with:\n‚Ä¢ Translation\n‚Ä¢ Study & quizzes\n‚Ä¢ Mood detection\n‚Ä¢ Code assistance\n‚Ä¢ Story generation\n‚Ä¢ And more!\n\nType "help" to see all commands.`;
                }

                this.addMessage('assistant', response);
                this.speak(response.substring(0, 200)); // Speak first 200 chars
            }
        }

        // ==================== UI FUNCTIONS ====================
        
        const nova = new NovaAI();

        function toggleVoice() {
            if (nova.isListening) {
                nova.stopVoice();
            } else {
                nova.startVoice();
            }
        }

        function sendMessage() {
            const input = document.getElementById('chatInput');
            const message = input.value.trim();
            
            if (message) {
                nova.addMessage('user', message);
                nova.processCommand(message);
                input.value = '';
            }
        }

        function handleKeyPress(event) {
            if (event.key === 'Enter') {
                sendMessage();
            }
        }

        function quickCommand(command) {
            document.getElementById('chatInput').value = command;
            sendMessage();
        }

        function showHelp() {
            const content = `
                <div class="section-title">üåê Translation</div>
                <div>‚Ä¢ "translate hello to hindi"</div>
                <div>‚Ä¢ "translate thank you to spanish"</div>
                <div>Supported: Hindi, Spanish, French, German, Japanese</div>

                <div class="section-title">üìö Study Assistant</div>
                <div>‚Ä¢ "explain machine learning"</div>
                <div>‚Ä¢ "explain photosynthesis"</div>
                <div>‚Ä¢ "quiz me on python"</div>
                <div>‚Ä¢ "study tips"</div>

                <div class="section-title">üòä Mood Detection</div>
                <div>‚Ä¢ "detect my mood"</div>
                <div>‚Ä¢ Will analyze your feelings and suggest music</div>

                <div class="section-title">üíª Code Assistant</div>
                <div>‚Ä¢ "code help function"</div>
                <div>‚Ä¢ "code help loop"</div>
                <div>‚Ä¢ "explain syntax error"</div>

                <div class="section-title">üìñ Storytelling</div>
                <div>‚Ä¢ "tell me an adventure story"</div>
                <div>‚Ä¢ "tell me a scifi story"</div>
                <div>‚Ä¢ "tell me a bedtime story"</div>

                <div class="section-title">üé§ Voice Commands</div>
                <div>‚Ä¢ Click the microphone button</div>
                <div>‚Ä¢ Speak any of the above commands</div>
                <div>‚Ä¢ Nova will respond with voice and text</div>

                <div class="section-title">‚è∞ Utilities</div>
                <div>‚Ä¢ "what time is it"</div>
                <div>‚Ä¢ "what's the date"</div>
            `;
            
            document.getElementById('helpContent').innerHTML = content;
            document.getElementById('helpModal').classList.add('show');
        }

        function showFeatures() {
            const content = `
                <div class="section-title">‚ú® All Features</div>
                
                <div style="margin: 1rem 0;">
                    <strong>1. üåê Multi-Language Translation</strong><br>
                    Translate to 20+ languages including Hindi, Spanish, French, German, Japanese, and more.
                </div>

                <div style="margin: 1rem 0;">
                    <strong>2. üìö Smart Study Assistant</strong><br>
                    ‚Ä¢ Concept explanations (ML, Science, Programming)<br>
                    ‚Ä¢ Interactive quizzes (Python, Science, Math)<br>
                    ‚Ä¢ Study tips and learning strategies<br>
                    ‚Ä¢ Flashcard system
                </div>

                <div style="margin: 1rem 0;">
                    <strong>3. üòä Mood Detection & Music</strong><br>
                    ‚Ä¢ Analyze mood from text<br>
                    ‚Ä¢ Music recommendations based on mood<br>
                    ‚Ä¢ Personalized mood boosters
                </div>

                <div style="margin: 1rem 0;">
                    <strong>4. üíª Code Assistant</strong><br>
                    ‚Ä¢ Code generation (functions, loops, etc.)<br>
                    ‚Ä¢ Error explanation and debugging<br>
                    ‚Ä¢ Algorithm examples<br>
                    ‚Ä¢ Best practices
                </div>

                <div style="margin: 1rem 0;">
                    <strong>5. üìñ AI Storyteller</strong><br>
                    ‚Ä¢ Adventure stories<br>
                    ‚Ä¢ Sci-fi narratives<br>
                    ‚Ä¢ Bedtime stories<br>
                    ‚Ä¢ Customizable characters and settings
                </div>

                <div style="margin: 1rem 0;">
                    <strong>6. üé§ Voice Recognition</strong><br>
                    ‚Ä¢ Natural speech understanding<br>
                    ‚Ä¢ Voice commands<br>
                    ‚Ä¢ Text-to-speech responses<br>
                    ‚Ä¢ Hands-free operation
                </div>

                <div style="margin: 1rem 0;">
                    <strong>7. ‚è∞ Smart Utilities</strong><br>
                    ‚Ä¢ Current time and date<br>
                    ‚Ä¢ Quick calculations<br>
                    ‚Ä¢ Information lookup
                </div>
            `;
            
            document.getElementById('featuresContent').innerHTML = content;
            document.getElementById('featuresModal').classList.add('show');
        }

        function closeModal(modalId) {
            document.getElementById(modalId).classList.remove('show');
        }

        // Close modals when clicking outside
        window.onclick = function(event) {
            if (event.target.classList.contains('modal')) {
                event.target.classList.remove('show');
            }
        }
    </script>
</body>
</html>
